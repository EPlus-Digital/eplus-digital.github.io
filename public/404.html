<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>E+ Digital</title>
    <script>
      // Single Page Apps for GitHub Pages
      // This script redirects 404 errors to the React app with the path as a query parameter
      // Prevents infinite loops by checking if already redirected

      (function() {
        var l = window.location;
        var search = l.search;
        var pathname = l.pathname;
        
        // CRITICAL: Prevent infinite loops
        // If we're already on a redirect URL (has ?/ in search), don't redirect
        if (search && search.indexOf('?/') !== -1) {
          // Already redirected, React Router will handle it - don't redirect again
          return;
        }
        
        // Don't redirect if we're on the root path
        if (pathname === '/' || pathname === '/index.html' || pathname === '') {
          return;
        }
        
        // Extract valid path segments (exclude empty strings and index.html)
        var pathSegments = pathname.split('/').filter(function(segment) {
          return segment !== '' && segment !== 'index.html';
        });
        
        // Don't redirect if no valid path segments
        if (pathSegments.length === 0) {
          return;
        }
        
        // Build the path to redirect to
        var redirectPath = '/' + pathSegments.join('/');
        
        // Build redirect URL: /?/path#hash
        var redirectUrl = l.protocol + '//' + l.hostname + (l.port ? ':' + l.port : '') + 
          '/?/' + redirectPath.replace(/&/g, '~and~') +
          (l.hash ? l.hash : '');
        
        // Perform redirect using replace (no history entry)
        l.replace(redirectUrl);
      })();
    </script>
  </head>
  <body>
  </body>
</html>
